(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2222,5773,3921],{37040:function(e,a,t){"use strict";var n=t(85893),r=(t(67294),t(41664)),s=t(12625);a.Z=(0,s.withTranslation)("common")((function(e){var a=e.url,t=e.text,s=e.t;return(0,n.jsxs)("div",{className:a?"header_component":"header_component center",children:[(0,n.jsx)("span",{className:"header_title",children:t}),a?(0,n.jsx)(r.default,{href:a,children:(0,n.jsx)("a",{className:"header_see_all",children:(0,n.jsx)("span",{children:s("disc_more")})})}):null]})}))},13921:function(e,a,t){"use strict";t.r(a);var n=t(85893);t(67294);a.default=function(){return(0,n.jsx)("div",{className:"loader_container",children:(0,n.jsx)("img",{src:"/svg/loading.svg",alt:"loading"})})}},65773:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return s}});var n=t(85893),r=t(51436);function s(e){var a=e.h,t=void 0===a?"h2":a,s=e.text,i=e.cssClass,l=void 0===i?"":i,o=e.lang,c=void 0===o?"en":o,u=e.url,d=void 0===u?null:u,m=e.urlText,h=void 0===m?{en:"see all",ar_QA:"\u0627\u0638\u0647\u0627\u0631 \u0627\u0644\u0643\u0644"}:m,p=e.Link,_=e.FontAwesomeIcon,g=e.textColor;return(0,n.jsxs)("div",{className:"header_component",children:[(0,n.jsx)(t,{style:g?{color:"red"}:{},className:"".concat(l),children:s}),d&&(0,n.jsx)(p,{href:d,children:(0,n.jsxs)("a",{className:"header_see_all",children:[(0,n.jsx)("span",{children:h[c]})," ",(0,n.jsx)(_,{className:"fa-xs",icon:r.eFW})]})})]})}},77995:function(e,a,t){"use strict";t.d(a,{Po:function(){return r},vI:function(){return s},vM:function(){return i},FX:function(){return l}});var n=t(39606),r=function(e){window&&window.dataLayer&&(dataLayer.push({ecommerce:null}),dataLayer.push({event:"productClick",ecommerce:{click:{product:[{name:e.name,id:e.id,price:e.price.formatted}]}}}))},s=function(e,a){window&&window.dataLayer&&(dataLayer.push({ecommerce:null}),dataLayer.push({event:"addToCart",ecommerce:{currencyCode:"QAR",add:{products:[{name:e.name,id:e.id,price:e.price.formatted,quantity:a}]}}}))},i=function(e){var a=e.map((function(e){return{id:e.product_id,name:e.name,qty:e.qnt,price:e.price.amount}}));window&&window.dataLayer&&(dataLayer.push({ecommerce:null}),dataLayer.push({event:"begin_checkout",ecommerce:{items:(0,n.Z)(a)}}))},l=function(e){var a=e.map((function(e){return{id:e.product_id,name:e.name,qty:e.qnt,price:e.price.amount}}));window&&window.dataLayer&&(dataLayer.push({ecommerce:null}),dataLayer.push({event:"transection",ecommerce:{items:{actionField:{step:4,option:"Visa"},products:a}}}))}},2270:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return Q}});var n=t(85893),r=t(92809),s=t(67294),i=t(9008),l=t(96698),o=t(9669),c=t.n(o),u=t(30571),d=t(14494),m=t(11163),h=t(39249),p=t(5152),_=t(12625),g=t(41664),f=t(17625),j=t(51436);var x=function(e){var a=e.active,t=e.styles,r=e.online,s=void 0!==r&&r;return(0,n.jsx)("div",{className:t.pregress_bar,children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"".concat(t.wrap," ").concat(a>=1?t.active:""),children:(0,n.jsx)(f.G,{icon:j.XCy})})}),(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"".concat(t.wrap," ").concat(a>=2?t.active:""),children:(0,n.jsx)(f.G,{icon:j.Nmi})})}),(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"".concat(t.wrap," ").concat(a>=3?t.active:""),children:(0,n.jsx)(f.G,{icon:s?j.hkK:j.LEp})})}),s&&(0,n.jsx)("li",{children:(0,n.jsx)("div",{className:"".concat(t.wrap," ").concat(a>=4?t.active:""),children:(0,n.jsx)(f.G,{icon:j.Ozh})})})]})})})},v=t(42283),b=["Al Adhbah","Al Daayen","Al Hitmi","Al Jasrah","Al Jumaliyah","Al Ka'biyah","Al Khalifat","Al Khawr","Al Khor","Al Khuwayr","Al Mafjar","Al Qaabiyah","Al Rayyan","Al Sailiya","Al Shamal","Al Wakhra","Doha","Dukhan","Gharafa","Ras Laffan","Shahaniya","Umm Bab","Umm Sa'id","Umm Salal ALi","Umm Salal Muhammad"],y=["Al Adhbah","Al Daayen","Al Ebb","Jeryan Jenaihat","Al Kheesa","leabaib","lusail","Al Masrouhiya","Rawdat Al Hamama","Al Sakhama","Umm Qarn","Wadi Al Wasaah","Wadi Lusail","New Al Hitmi","Old Al Hitmi","Al Jasrah","Al Jumaliyah","Madinath Al Kaaban","Al Khalifat","Al Khawr","Al Ghuwariyah","Al jeryan","Al Khor","Simaisma","Al Thakhira","Umm Birka","Al Khuwayr","Al Mafjar","Al Qaabiyah","Abu Samra","Ain Khalid","Al Aziziya","Baaya","Bani Hajar","Barwa City","Bu Hamour","Bu Sidra","Fareej Al Amir","Fareej Al Asiri","Fareej Al  Murra","Fareej Al Manaseer","Fareej Al Sudan","Fareej Al Zaeem","Gharafat Al Rayyan","Izghawa AL rayyan","Lebday","Lijmiliya","Laib","AL Luqta","Mebaireek","Mehairja","Mesaimeer","Muither","Muraikh","AL Mamoura","New Al Rayyan","New Fereej Al Ghanim","New fereej Al Khulaifat","Al Nasraniya","Old Al Rayyan","Rawdat Egdaim","Rawdat Rashed","Sawda Natheel","Al Shagub","AL Shahaniya","Al Themaid","Al Utouriya","AL Waab","AL Wajba","Al Sailiya","Abu Dhalouf","Ain Sinan","Fuwayrit","Madinath AL Shamal","Ar Ru'ays","AL Zubarah","Al Adaid","Al karaana","AL kharrara","Mesaieed","Mesaieed Industrial area","Al Mashaf","Shagra","Al thumama (AL wakhra)","Al Wakhra","AL Wukair","Brahat AL Jufairy","Al Bidda","Dahl AL Hammam","Doha International airport","Doha port","Duhail","Al Dafna","Al doha AL Jadeeda","AL Egla","Fereej Abdul Aziz","Ferrej Bin Dirham","Fereej Bin Mahmud","Fereej Bin Omran","Fereej Kulaib","Fereej Mohameed Bin Jassim","Fereej AL Asmakh","Fereej Al Nasr","Hamad Medical City","Hazm Al Markhiya","Al Hilal","Industrial Area","Jabal Thuaileb","Jelaiah","Jeryan Nejaima","Al Kharayej","Lejbailat","lekhwair","leqtaifiya","Madinath Khalifa North","Madinath Khalifa South","Al Messila","Mushayrib","Al Mansoura","Al Markhiyah","Al Mearad","Al Mirqab","Najma","New AL Mirqab","New Salata","Nu'ayjah","AL Najada","Old Airport","Old AL Ghanim","Onaiza","The Pearl ","Al Qassar","Ras Abu Aboud","Rawdat AL Khalil","Rumaila","Al Rufaa","Al Saad","AS Salata","SL Souq","Al Seej","Al tarfa","Al Tumama(doha)","Umm Ghuwailina","Umm Lekhba","Wadi Al Banat","Wadi AL Sail","Dukhan","Gharafa","Ras Laffan","Shahaniya","Umm Bab","Izghawa(umm Salal)","Umm Salal Ali","Bu Fasseela","Al Kharaitiyat","Umm Salal Muhammad"],A={"Al Adhbah":["Al Adhbah"],"Al Daayen":["Al Daayen","Al Ebb","Jeryan Jenaihat","Al Kheesa","leabaib","lusail","Al Masrouhiya","Rawdat Al Hamama","Al Sakhama","Umm Qarn","Wadi Al Wasaah","Wadi Lusail"],"Al Hitmi":["New Al Hitmi","Old Al Hitmi"],"Al Jasrah":["Al Jasrah"],"Al Jumaliyah":["Al Jumaliyah"],"Al Ka'biyah":["Madinath Al Kaaban"],"Al Khalifat":["Al Khalifat"],"Al Khawr":["Al Khawr"],"Al Khor":["Al Ghuwariyah","Al jeryan","Al Khor","Simaisma","Al Thakhira","Umm Birka"],"Al Khuwayr":["Al Khuwayr"],"Al Mafjar":["Al Mafjar"],"Al Qaabiyah":["Al Qaabiyah"],"Al Rayyan":["Abu Samra","Ain Khalid","Al Aziziya","Baaya","Bani Hajar","Barwa City","Bu Hamour","Bu Sidra","Fareej Al Amir","Fareej Al Asiri","Fareej Al  Murra","Fareej Al Manaseer","Fareej Al Sudan","Fareej Al Zaeem","Gharafat Al Rayyan","Izghawa AL rayyan","Lebday","Lijmiliya","Laib","AL Luqta","Mebaireek","Mehairja","Mesaimeer","Muither","Muraikh","AL Mamoura","New Al Rayyan","New Fereej Al Ghanim","New fereej Al Khulaifat","Al Nasraniya","Old Al Rayyan","Rawdat Egdaim","Rawdat Rashed","Sawda Natheel","Al Shagub","AL Shahaniya","Al Themaid","Al Utouriya","AL Waab","AL Wajba"],"Al Sailiya":["Al Sailiya"],"Al Shamal":["Abu Dhalouf","Ain Sinan","Fuwayrit","Madinath AL Shamal","Ar Ru'ays","AL Zubarah"],"Al Wakhra":["Al Adaid","Al karaana","AL kharrara","Mesaieed","Mesaieed Industrial area","Al Mashaf","Shagra","Al thumama (AL wakhra)","Al Wakhra","AL Wukair"],Doha:["Brahat AL Jufairy","Al Bidda","Dahl AL Hammam","Doha International airport","Doha port","Duhail","Al Dafna","Al doha AL Jadeeda","AL Egla","Fereej Abdul Aziz","Ferrej Bin Dirham","Fereej Bin Mahmud","Fereej Bin Omran","Fereej Kulaib","Fereej Mohameed Bin Jassim","Fereej AL Asmakh","Fereej Al Nasr","Hamad Medical City","Hazm Al Markhiya","Al Hilal","Industrial Area","Jabal Thuaileb","Jelaiah","Jeryan Nejaima","Al Kharayej","Lejbailat","lekhwair","leqtaifiya","Madinath Khalifa North","Madinath Khalifa South","Al Messila","Mushayrib","Al Mansoura","Al Markhiyah","Al Mearad","Al Mirqab","Najma","New AL Mirqab","New Salata","Nu'ayjah","AL Najada","Old Airport","Old AL Ghanim","Onaiza","The Pearl ","Al Qassar","Ras Abu Aboud","Rawdat AL Khalil","Rumaila","Al Rufaa","Al Saad","AS Salata","SL Souq","Al Seej","Al tarfa","Al Tumama(doha)","Umm Ghuwailina","Umm Lekhba","Wadi Al Banat","Wadi AL Sail"],Dukhan:["Dukhan"],Gharafa:["Gharafa"],"Ras Laffan":["Ras Laffan"],Shahaniya:["Shahaniya"],"Umm Bab":["Umm Bab"],"Umm Sa'id":["Izghawa(umm Salal)"],"Umm Salal ALi":["Umm Salal Ali"],"Umm Salal Muhammad":["Bu Fasseela","Al Kharaitiyat","Umm Salal Muhammad"]},N=t(58808),w=t.n(N),S=t(19663),k=(t(28440),t(70434));function C(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function P(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?C(Object(t),!0).forEach((function(a){(0,r.Z)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var I=(0,p.default)((function(){return Promise.resolve().then(t.bind(t,65773))}),{loadableGenerated:{webpack:function(){return[65773]},modules:["../components/Pages/Checkout/StepOne.jsx -> ../../../components/layout/partials/Header"]}});var L=(0,d.$j)((function(e){return{cartItems:e.cart.cartItem,auth:e.auth}}))((0,_.withTranslation)("common")((function(e){var a=e.t,t=e.styles,r=(0,v.cI)(),i=r.register,l=r.formState.errors,o=(r.watch,r.handleSubmit),c=(r.getValues,(0,s.useState)({suggestions:[]})),u=c[0],d=c[1],m=(0,s.useState)({suggestions:[]}),h=m[0],p=m[1],_=(0,s.useState)(e.val.billing_state),f=_[0],j=_[1],N=(0,s.useState)(e.val.billing_city),C=N[0],L=N[1],M=(0,s.useState)(null),O=M[0],R=M[1],F=(0,s.useState)(""),E=F[0],T=F[1],D=(0,s.useState)(""),q=D[0],B=D[1],K=(0,s.useState)(e.val.customer_email),H=K[0],U=K[1],z=(0,s.useState)(!1),J=z[0],Z=z[1],G=(0,s.useState)(null),W=G[0],V=G[1],Q=(0,s.useState)(e.val.country_code+e.val.customer_phone),Y=Q[0],X=Q[1];function $(e,a){var t=e.trim().toLowerCase();return 0===t.length?[]:a.filter((function(e){return e.toLowerCase().indexOf(t)>-1}))}return(0,s.useEffect)((function(){e.val.state=f})),(0,s.useEffect)((function(){b.includes(C)&&R(A[C])}),[C]),(0,s.useEffect)((function(){R(y)}),[y]),(0,s.useEffect)((function(){Z(window.localStorage.getItem("auth_token")&&!JSON.parse(window.localStorage.getItem("user")).isCustomer),V(window.localStorage.getItem("auth_token")&&JSON.parse(window.localStorage.getItem("user")).id),window.scrollTo(0,0)}),[]),(0,n.jsx)("div",{className:t.step_one,children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsxs)("div",{className:"col-md-8",children:[(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(I,{h:"h2",text:a("address"),Link:g.default})}),(0,n.jsx)(x,{styles:t,active:1}),(0,n.jsxs)("div",{className:t.delivery_form,children:[(0,n.jsx)("div",{className:t.form_title,children:a("Fill-up your delivery form")}),(0,n.jsxs)("form",{autoComplete:"off",onSubmit:o((function(a){if((0,S.yf)(Y)&&f&&C){var t=(0,S.SR)(Y);a.country_code="+"+t.countryCallingCode,a.customer_phone=t.nationalNumber,a.billing_state=f,a.billing_city=C,a.source_name=E,a.source_details=q,a.customer_email=H,a.custom_order=J,a.custom_order_creator=W,e.changeStep(a)}})),children:[(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{className:"input_label",children:[a("Full Name"),"*"]}),(0,n.jsx)("input",P({name:"customer_first_name",type:"text",defaultValue:J?"":e.val.customer_first_name,className:null!==l&&void 0!==l&&l.customer_first_name?"form-control  is-invalid":"form-control "},i("customer_first_name",{required:!0}))),(null===l||void 0===l?void 0:l.customer_first_name)&&(0,n.jsx)("div",{className:"invalid-feedback",children:"Full Name Required."})]})}),(0,n.jsx)("div",{className:"col-md-6",children:window&&window.localStorage.getItem("auth_token")?(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{className:"input_label",children:[a("Phone"),"*"]}),(0,n.jsx)(S.ZP,{international:!0,defaultCountry:"QA",value:Y,onChange:function(e){X(e)},autoComplete:"none"}),Y&&(0,S.yf)(Y)?null:(0,n.jsx)("div",{className:"ml-4 text-danger",children:"Valid phone number required"}),(0,n.jsx)("input",{hidden:!0,name:"customer_email",defaultValue:e.val.customer_email,autoComplete:"nope"})]}):(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"input_label",children:"Email address*"}),(0,n.jsx)("input",{type:"email",autoComplete:"nope",name:"customer_email",defaultValue:e.val.customer_email,onChange:function(e){U(e.currentTarget.value)},className:"form-control",required:!0})]})})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-lg-12",children:(0,n.jsx)("div",{className:"form-group",children:(0,n.jsxs)("label",{className:"checkbox_label",children:[(0,n.jsx)("input",{onChange:function(){return e.checkBoxHandler()},checked:e.val.active,type:"checkbox"}),(0,n.jsx)("span",{}),a("I know My BluePlates")]})})}),e.val.active?(0,n.jsx)("div",{className:"col-lg-4",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"input_label",children:"Street*"}),(0,n.jsx)("input",P({name:"street",type:"text",defaultValue:e.val.street,className:null!==l&&void 0!==l&&l.street?"form-control  is-invalid":"form-control "},i("street",{required:!0}))),(null===l||void 0===l?void 0:l.street)&&(0,n.jsx)("div",{className:"invalid-feedback",children:"Street Required."})]})}):null,e.val.active?(0,n.jsx)("div",{className:"col-lg-4",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"input_label",children:"Zone*"}),(0,n.jsx)("input",P({name:"zone",type:"text",defaultValue:e.val.zone,className:null!==l&&void 0!==l&&l.street?"form-control  is-invalid":"form-control "},i("zone",{required:!0}))),(null===l||void 0===l?void 0:l.zone)&&(0,n.jsx)("div",{className:"invalid-feedback",children:"Zone Required."})]})}):null,e.val.active?(0,n.jsx)("div",{className:"col-lg-4",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"input_label",children:"Building*"}),(0,n.jsx)("input",P({name:"building",type:"text",defaultValue:e.val.building,className:null!==l&&void 0!==l&&l.building?"form-control  is-invalid":"form-control "},i("building",{required:!0}))),(null===l||void 0===l?void 0:l.building)&&(0,n.jsx)("div",{className:"invalid-feedback",children:"Building Required."})]})}):null]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{className:"input_label",children:[a("Full Address"),"*"]}),(0,n.jsx)("input",P({autoComplete:"nope",defaultValue:e.val.billing_address_1,name:"billing_address_1",type:"text",className:null!==l&&void 0!==l&&l.billing_address_1?"form-control  is-invalid":"form-control "},i("billing_address_1",{required:!0}))),(null===l||void 0===l?void 0:l.billing_address_1)&&(0,n.jsx)("div",{className:"invalid-feedback",children:"Full Address Required."})]})}),(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"input_label",children:a("Apartment/Suit/Unit (optional)")}),(0,n.jsx)("input",P({name:"billing_address_2",autoComplete:"none",defaultValue:e.val.billing_address_2,type:"text",className:"form-control "},i("billing_address_2")))]})})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{className:"input_label",children:[a("City"),"*"]}),(0,n.jsx)(w(),{id:"city",suggestions:h.suggestions,onSuggestionsFetchRequested:function(){p({suggestions:$(C,b)})},onSuggestionsClearRequested:function(){p({suggestions:[]})},getSuggestionValue:function(e){return e},renderSuggestion:function(e){return e},inputProps:{className:"form-control",autoComplete:"none",placeholder:"Your City name",value:C,onChange:function(e,a){var t=a.newValue;return L(t)}}}),!C&&(0,n.jsx)("div",{className:"text-danger",children:"City Required."})]})}),(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{className:"input_label",children:[a("Area"),"*"]}),(0,n.jsx)(w(),{id:"states",suggestions:u.suggestions,onSuggestionsFetchRequested:function(){d({suggestions:$(f,O)})},onSuggestionsClearRequested:function(){d({suggestions:[]})},getSuggestionValue:function(e){return e},renderSuggestion:function(e){return e},inputProps:{autoComplete:"none",placeholder:"Your state name",value:f,className:"form-control",onChange:function(a,t){var n=t.newValue;return j(n),e.val.state=n}}}),!f&&(0,n.jsx)("div",{className:"text-danger",children:"State Required."})]})})]}),(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{onChange:function(a){var t=a.target.value;e.radioHandler(t)},className:"col-lg-6 ",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{className:"input_label",children:[a("Delivery Time"),"*"]}),(0,n.jsxs)("div",{className:t.deleviry_schedule,children:[(0,n.jsxs)("div",{className:"form-group ".concat(t.info_wrap," ").concat(t.form_group),children:[(0,n.jsx)("span",{className:t.info,children:"9AM - 1PM "}),(0,n.jsx)("label",{htmlFor:"morning",className:"input_label ".concat(t.info_wrapper),children:a("Morning")}),(0,n.jsx)("input",{defaultChecked:"morning"==e.val.order_schedule,id:"morning",type:"radio",name:"order_schedule",defaultValue:"morning",className:"form-control "})]}),(0,n.jsxs)("div",{className:"".concat(t.info_wrap," form-group ").concat(t.form_group),children:[(0,n.jsx)("span",{className:t.info,children:"4PM - 7PM "}),(0,n.jsx)("label",{htmlFor:"afternoon",className:"input_label",children:a("Afternoon")}),(0,n.jsx)("input",{id:"afternoon",type:"radio",name:"order_schedule",defaultValue:"afternoon",defaultChecked:"afternoon"==e.val.order_schedule,className:"form-control "})]}),(0,n.jsxs)("div",{className:"form-group ".concat(t.info_wrap," ").concat(t.form_group),children:[(0,n.jsx)("span",{className:t.info,children:"7PM - 10PM "}),(0,n.jsx)("label",{htmlFor:"evening",className:"input_label",children:a("Evening")}),(0,n.jsx)("input",{id:"evening",type:"radio",name:"order_schedule",defaultValue:"evening",defaultChecked:"evening"==e.val.order_schedule,className:"form-control "})]}),(0,n.jsxs)("div",{className:"form-group ".concat(t.info_wrap," ").concat(t.form_group),children:[(0,n.jsx)("label",{htmlFor:"anytime",className:"input_label",children:a("Any Time")}),(0,n.jsx)("input",{id:"anytime",type:"radio",name:"order_schedule",defaultValue:"anytime",defaultChecked:"anytime"==e.val.order_schedule,className:"form-control "})]}),(0,n.jsx)("input",{id:"shipping_cost",type:"text",name:"shipping_cost",defaultValue:e.shipping,hidden:!0}),(0,n.jsx)("input",{id:"shipping_method",type:"text",name:"shipping_method",defaultValue:0===e.shipping?"free_shipping":"flat_rate",hidden:!0})]})]})}),(0,n.jsx)("div",{className:"col-lg-6",children:(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsxs)("label",{className:"input_label",children:[a("Note(optional)"),":"]}),(0,n.jsx)("textarea",{value:e.val.order_note,rows:"2",name:"order_note",className:"form-control ",onChange:function(a){return e.testAreaHandler(a.target.value)}})]})})]}),(0,n.jsx)("div",{className:t.submit_container,children:(0,n.jsx)("input",{className:t.proceed,type:"submit",value:a("PROCEED TO PAYMENT")})})]})]})]}),(0,n.jsxs)("div",{className:"col-md-4",children:[J?(0,n.jsxs)("div",{className:"order_source",children:[(0,n.jsx)("h5",{children:"Order Source"}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{className:"input_label",children:"Email address*"}),(0,n.jsx)("input",{type:"email",name:"customer_email",defaultValue:e.val.customer_email,onChange:function(e){return U(e.currentTarget.value)},required:!0,className:"form-control"}),(null===l||void 0===l?void 0:l.customer_email)&&"required"===(null===l||void 0===l?void 0:l.customer_email.type)&&(0,n.jsx)("div",{className:"invalid-feedback",children:"Email Address Required."}),(null===l||void 0===l?void 0:l.customer_email)&&"pattern"===(null===l||void 0===l?void 0:l.customer_email.type)&&(0,n.jsx)("div",{className:"invalid-feedback",children:"Not a Valid Email."})]}),(0,n.jsxs)("select",{name:"order_source",value:E,onChange:function(e){return T(e.currentTarget.value)},className:null!==l&&void 0!==l&&l.order_source?"custom-select is-invalid":"custom-select",children:[(0,n.jsx)("option",{value:"",hidden:"",children:"Select one"}),(0,n.jsx)("option",{value:"facebook",children:"Facebook"}),(0,n.jsx)("option",{value:"instagram",children:"Instagram"}),(0,n.jsx)("option",{value:"phone-call",children:"Phone Call"}),(0,n.jsx)("option",{value:"whatsapp",children:"WhatsApp"})]}),""!==E?(0,n.jsxs)("div",{className:"form-group ",children:[(0,n.jsxs)("label",{htmlFor:"order_source",children:["Source",(0,n.jsx)("span",{children:"*"})]}),(0,n.jsx)("input",{name:"source_details",value:q,onChange:function(e){return B(e.currentTarget.value)},type:"text",className:null!==l&&void 0!==l&&l.source_details?"form-control is-invalid":"form-control",placeholder:"Enter Facebook/Instagram/WhatsApp"})]}):"",(0,n.jsx)("hr",{})]}):"",(0,n.jsxs)("div",{className:t.cart_list,children:[(0,n.jsx)("div",{className:t.item_title,children:a("Product Check")}),(0,n.jsx)("div",{className:t.cart_items,children:e.cartItems.map((function(e,a){return(0,n.jsx)("div",{className:t.cart_item,children:(0,n.jsxs)("div",{className:t.details,children:[(0,n.jsx)("div",{className:t.img_wrap,children:(0,n.jsx)("img",{src:e.thumb,alt:""})}),(0,n.jsxs)("div",{className:t.detail,children:[(0,n.jsx)("span",{className:t.name,children:e.name}),(0,n.jsx)("span",{className:t.option_value,children:e.option_value}),(0,n.jsxs)("div",{className:t.qnt,children:[" ",e.qnt," * ",e.price.formatted]})]})]})},a)}))})]}),(0,n.jsxs)("div",{className:"".concat(t.summery," mb-2"),children:[(0,n.jsx)("div",{className:t.item_title,children:a("ORDER SUMMARY")}),(0,n.jsxs)("div",{className:t.summery_items,children:[(0,n.jsxs)("div",{className:t.summery_item,children:[(0,n.jsx)("span",{className:t.sub,children:a("ORDER SUB-TOTAL")}),(0,n.jsxs)("span",{className:t.amount,children:["QAR ",(0,k.priceWithoutDiscount)(e.cartItems)]})]}),(0,n.jsxs)("div",{className:t.summery_item,children:[(0,n.jsx)("span",{className:t.sub,children:a("DISCOUNT")}),(0,n.jsxs)("span",{className:t.amount,children:[" ","\u2212 QAR"," ",e.val.coupon?e.val.discount:(0,k.priceWithoutDiscount)(e.cartItems)-(0,k.calculateSubTotal)(e.cartItems)]})]}),(0,n.jsxs)("div",{className:t.summery_item,children:[(0,n.jsxs)("span",{className:t.sub,children:[a("SHIPPING"),"*"]}),(0,n.jsxs)("span",{className:t.amount,children:["QAR ",e.shipping,".00"]})]}),(0,n.jsxs)("div",{className:"".concat(t.summery_item," ").concat(t.total),children:[(0,n.jsx)("span",{className:t.sub,children:a("GRAND TOTAL")}),(0,n.jsxs)("span",{className:t.amount,children:["QAR"," ",((0,k.calculateSubTotal)(e.cartItems,e.val.coupon)+e.shipping-e.val.discount).toFixed(2)]})]})]})]})]})]})})})}))),M=t(65773);var O=(0,_.withTranslation)("common")((function(e){var a=e.t,t=e.styles,r=(e.val,(0,s.useState)(e.val.coupon)),i=(r[0],r[1],(0,s.useState)()),l=(i[0],i[1]);(0,s.useEffect)((function(){l(window.localStorage.getItem("auth_token")&&!JSON.parse(window.localStorage.getItem("user")).isCustomer),window.scrollTo(0,0)}),[]);var o=function(a){e.deliviryHandler(a.target.value)};return(0,n.jsx)("div",{className:t.step_two,children:(0,n.jsxs)("div",{className:"container",children:[(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(M.default,{text:a("PAYMENT METHOD")})}),(0,n.jsx)(x,{styles:t,active:2}),(0,n.jsxs)("div",{className:t.details,children:[(0,n.jsx)("span",{className:t.question,children:a("How do you want to pay your order?")}),(0,n.jsx)("div",{className:"row justify-content-center",children:(0,n.jsxs)("div",{className:"col-lg-4 col-md-12",children:[(0,n.jsx)("div",{className:"".concat(t.payment_group," mt-4"),children:(0,n.jsx)("div",{className:t.wrap,children:(0,n.jsxs)("label",{htmlFor:"cod",children:[a("CASH ON DELIVERY"),(0,n.jsx)("input",{defaultChecked:"cod"==e.payment_method,type:"radio",name:"payment_method",onChange:o,value:"cod",id:"cod"})]})})}),(0,n.jsx)("div",{className:"".concat(t.payment_group," mt-4"),children:(0,n.jsx)("div",{className:t.wrap,children:(0,n.jsxs)("label",{htmlFor:"op",children:[a("ONLINE PAYMENT"),(0,n.jsx)("input",{defaultChecked:"op"==e.payment_method,type:"radio",onChange:o,name:"payment_method",value:"op",id:"op"})]})})})]})}),(0,n.jsxs)("div",{className:" ".concat(t.next_btn_wrap," mt-5 mb-5"),children:[(0,n.jsx)("button",{onClick:function(){return e.prevStep()},className:"next_btn",children:a("Previous")}),(0,n.jsx)("button",{onClick:function(){e.changeStep()},className:"next_btn",children:a("Next")})]})]})]})})})),R=t(13921),F=t(59359);t(88667);var E=function(e){var a=e.img,t=e.name,r=(e.id,e.price);return e.giftHandler,(0,n.jsxs)("div",{className:"gift__card",style:{cursor:"pointer",display:"flex",boxShadow:"0px 2px 5px 1px rgba(0,0,0,0.15)",padding:"5px 8px",borderRadius:4,margin:5,alignItems:"center"},children:[(0,n.jsx)("img",{style:{width:60,height:60,marginRight:8},src:a,alt:""}),(0,n.jsxs)("div",{className:"name__price",children:[(0,n.jsx)("div",{className:"name",children:t}),(0,n.jsxs)("div",{className:"price",children:[(0,n.jsx)("del",{children:r})," ",(0,n.jsx)("span",{style:{marginLeft:10},children:"QAR 0.00"})]})]})]})};var T=(0,d.$j)((function(e){return{cartItems:e.cart.cartItem}}))((0,_.withTranslation)("common")((function(e){var a=e.t,t=e.styles,r=(0,s.useState)(),i=(r[0],r[1]),o=(0,s.useState)(),c=(o[0],o[1],(0,s.useState)()),u=c[0];c[1],(0,s.useEffect)((function(){window.scrollTo(0,0)}),[]);var d=e.data,m=d.customer_first_name,h=(d.customer_email,d.order_schedule),p=d.billing_address_1,_=(d.shipping_cost,d.discount),f=d.store_pickup,j=(0,s.useState)(!1),v=j[0],b=j[1],y=function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],a=new Date,t=e[a.getMonth()],r=w(a.getFullYear(),a.getMonth()),s=a.getDate(),i=a.getDate()+3;if(i<=r)s="".concat(A(s,r)),i="".concat(A(i,r)," ").concat(t);else{s="".concat(A(s,r)," ").concat(t);var l=w(a.getFullYear(),a.getMonth()+1);i="".concat(A(i-r,l)," ").concat(e[a.getMonth()+1])}return(0,n.jsx)("span",{dangerouslySetInnerHTML:N("Regular Flexible Delivery within ".concat(s," ~ ").concat(i))})};function A(e,a){var t=e%10,n=e%a;return 1==t&&11!=n?e+"<sup>st</sup>":2==t&&12!=n?e+"<sup>nd</sup>":3==t&&13!=n?e+"<sup>rd</sup>":e+"<sup>th</sup>"}var N=function(e){return{__html:e}};function w(e,a){return new Date(e,a,0).getDate()}return(0,s.useEffect)((function(){var a="en"===e.lang?"en":"ar_QA";l.Z.get("".concat(a,"/getdata/free_gift")).then((function(e){e.data.length>0&&i(e.data)}))}),[]),(0,n.jsx)(n.Fragment,{children:v?(0,n.jsx)("div",{style:{marginTop:200},className:"loader",children:(0,n.jsx)(R.default,{})}):(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:t.step_three,children:[(0,n.jsx)("div",{className:"text-center",children:(0,n.jsx)(M.default,{text:a("INVOICE")})}),(0,n.jsx)(x,{styles:t,active:3,online:"op"==e.data.payment_method}),e.giftProduct&&(0,n.jsxs)("div",{style:{maxWidth:350,margin:"30px auto"},children:[" ",(0,n.jsx)(E,{name:e.giftProduct.name,img:e.giftProduct.image}),(0,n.jsx)("span",{style:{textAlign:"center",display:"block"},children:"We will add this product as a gift to your cart!"}),(0,n.jsx)("div",{style:{textAlign:"center"}})]}),(0,n.jsxs)("div",{className:t.invoice,children:[(0,n.jsx)("div",{className:t.invoice_title,children:a("Check your orders before you place order")}),(0,n.jsx)("div",{className:t.customer_info,children:(0,n.jsxs)("ul",{children:[(0,n.jsxs)("li",{children:[(0,n.jsxs)("span",{className:t.label,children:[a("Customer Name"),":"]})," ",m]}),(0,n.jsxs)("li",{children:[(0,n.jsxs)("span",{className:t.label,children:[a("Delivery Address"),":"]})," ",p]}),(0,n.jsxs)("li",{children:[(0,n.jsxs)("span",{className:t.label,children:[a("Delivery Schedule"),":"]})," ",h]})]})}),F.tq?(0,n.jsxs)("table",{className:"table table-bordered table-striped",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"#"}),(0,n.jsx)("th",{children:"Product Name"})]})}),(0,n.jsx)("tbody",{children:e.cartItems.map((function(e,a){return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:a+1}),(0,n.jsxs)("td",{children:[e.name,e.option_value?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("br",{})," ",(0,n.jsx)("span",{style:{color:"#f37"},children:e.option_value})]}):"",(0,n.jsx)("br",{}),(0,n.jsxs)("span",{style:{color:"grey"},children:["Qty: ",e.qnt," | Price:"," ",e.price.formatted," | Sum:",e.price.currency+" "+parseInt(e.qnt*e.price.amount),".00"]})]})]},a)}))})]}):(0,n.jsxs)("table",{className:"table table-bordered table-striped",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"#"}),(0,n.jsx)("th",{children:a("Product Name")}),(0,n.jsx)("th",{children:a("Quantity")}),(0,n.jsx)("th",{children:a("Price")}),(0,n.jsx)("th",{children:a("Total")})]})}),(0,n.jsx)("tbody",{children:e.cartItems.map((function(a,t){return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:t+1}),(0,n.jsxs)("td",{children:[a.name,(0,n.jsx)("br",{})," ",a.option_value]}),(0,n.jsx)("td",{children:a.qnt}),(0,n.jsx)("td",{children:a.price.formatted}),(0,n.jsxs)("td",{children:[a.price.currency+" "+(0,k.test)(a,e.data.coupon),(0,n.jsx)("br",{})]})]},t)}))})]}),(0,n.jsxs)("div",{className:t.table_footer,children:[(0,n.jsx)("div",{className:t.left,children:(0,n.jsx)("span",{children:(0,n.jsx)(y,{})})}),(0,n.jsxs)("div",{className:t.right,children:[(0,n.jsxs)("div",{className:"".concat(t.charge," ").concat(t.common),children:[(0,n.jsx)("span",{children:a("Delivery Charge")}),(0,n.jsxs)("span",{children:[" ",f?"00":u?20:e.shipping,".00"]})]}),(0,n.jsxs)("div",{className:"".concat(t.grand_total," ").concat(t.common),children:[(0,n.jsx)("span",{children:a("Sub Total")}),(0,n.jsxs)("span",{children:[(0,k.priceWithoutDiscount)(e.cartItems),".00"]})]}),_>0&&(0,n.jsxs)("div",{className:"".concat(t.charge," ").concat(t.common),children:[(0,n.jsx)("span",{style:{textTransform:"capitalize"},children:a("DISCOUNT")}),(0,n.jsxs)("span",{children:["-",_,".00"]})]}),(0,n.jsxs)("div",{className:"".concat(t.grand_total," ").concat(t.common),children:[(0,n.jsx)("span",{children:a("Grand Total")}),(0,n.jsx)("span",{children:parseInt((0,k.calculateSubTotal)(e.cartItems,e.data.coupon)+(f?0:u?20:parseInt(e.shipping))-parseInt(_)).toFixed(2)})]}),(0,n.jsxs)("div",{className:"".concat(t.payment_status," ").concat(t.common),children:[(0,n.jsx)("span",{children:a("Payment Status")}),(0,n.jsx)("span",{children:a("unpaid")})]})]})]}),(0,n.jsxs)("div",{className:t.place_order_container,children:[(0,n.jsx)("button",{className:"mr-2",onClick:function(){return e.prevStep()},children:a("Back")}),(0,n.jsx)("button",{onClick:function(){window.scrollTo(0,0),b(!0),e.orderSubmit()},children:a("PLACE ORDER")})]}),(0,n.jsxs)("h5",{className:"text-center",children:["BY HITTING THE PLACE ORDER BUTTON YOU ALSO ACCEPT OUR"," ",(0,n.jsx)(g.default,{href:"/terms-and-conditions",children:(0,n.jsx)("a",{children:"TERMS AND CONDITION"})})]})]})]})})})}))),D=t(37040);var q=(0,t(91768).Z)("common")((function(e){var a=e.order,t=e.t,r=e.styles,i=(0,s.useState)(),o=i[0],c=i[1],u=(0,s.useState)(),d=u[0],m=u[1],h=(0,s.useState)(!1),p=h[0],_=h[1];return(0,s.useEffect)((function(){window.scrollTo(0,0)}),[]),(0,n.jsx)("div",{className:r.step_four,children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-lg-2"}),localStorage.getItem("user")&&(0,n.jsx)("div",{className:"col-lg-1"}),(0,n.jsxs)("div",{className:"col-lg-5",children:[(0,n.jsx)(D.Z,{text:t("CONFIRMATION")}),(0,n.jsx)("div",{className:r.circle,children:(0,n.jsx)(f.G,{icon:j.LEp})}),(0,n.jsx)("p",{className:r.greet,children:t("Thank you for shopping with us")}),(0,n.jsxs)("p",{className:r.greet,children:[t("Your ORDER ID is "),a," "]}),(0,n.jsx)("p",{className:r.greet,children:t("Order will be processed with 24-72 hours after confirmation")}),(0,n.jsx)("div",{className:"continue_container",children:(0,n.jsx)(g.default,{href:"/",children:(0,n.jsx)("a",{children:t("Back To Shopping")})})})]}),!localStorage.getItem("user")&&(0,n.jsxs)("div",{className:"col-lg-4",children:[(0,n.jsx)(D.Z,{text:"Set password "}),(0,n.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),d==o){var t={password:o,confirm_password:d,order:a};l.Z.post("en/auth/post-order-register",t).then((function(e){_(!0),alert("Your account has been created")})).catch((function(e){e.response?alert(e.response.data.message):alert("We're sorry but this operation cannot be completed now")}))}else alert("password doesn't match")},children:[(0,n.jsx)("strong",{children:"Set password for future login with the email you have ordered now!"}),(0,n.jsxs)("div",{className:"form-group my-4",children:[(0,n.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Password"}),(0,n.jsx)("input",{required:!0,type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password",name:"password",value:o,onChange:function(e){return c(e.target.value)}})]}),(0,n.jsxs)("div",{className:"form-group my-4",children:[(0,n.jsx)("label",{htmlFor:"exampleInputPassword1",children:"Confirm Password"}),(0,n.jsx)("input",{required:!0,type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Confirm  Password",name:"confirmPassword",value:d,onChange:function(e){return m(e.target.value)}})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-block btn-outline-success my-3",disabled:p,children:"Submit"})]})]})]})})})})),B=t(76808),K=t(97314),H=t(71470),U=new(t(69585).Z);var z=(0,d.$j)((function(e){return{auth:e.auth,cartItems:e.cart.cartItem}}),(function(e){return{loginUser:function(a){return(0,B.pH)(e,a)},logout:function(){return(0,B.TX)(e)},setLoginError:function(){return(0,B.Zw)(e)}}}))((0,_.withTranslation)("common")((function(e){var a=e.loginUser,t=e.auth,r=e.setLoginError,i=e.history,o=e.numberHnadler,u=(e.changeStep,e.stepZeroSubmit),d=e.logout,m=e.cartItems,h=e.t,p=e.styles,_=(0,s.useState)(""),g=_[0],f=_[1],j=(0,s.useState)(""),x=j[0],v=j[1],b=(0,s.useState)(""),y=b[0],A=b[1],N=(0,s.useState)(""),w=N[0],k=N[1],C=(0,s.useState)(""),P=C[0],I=C[1],L=(0,s.useState)(!1),M=L[0],O=L[1],R=s.createRef(),F=(0,s.useState)(!1),E=F[0],T=F[1],D=(0,s.useState)(!1),q=D[0],B=D[1],z=(0,s.useState)(59),J=z[0],Z=z[1];(0,s.useEffect)((function(){t.isAuthenticated?(T(!0),c().get("/api/profile",{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token")||"")}}).then((function(e){T(!1),r("");var a=e.data.order?e.data.order.length-1:null;u(e.data.order?e.data.order[a]:null)})).catch((function(e){500===e.response.status&&d()}))):t.isAuthenticated||""===t.error||window.alert(t.error)}),[t]),(0,s.useEffect)((function(){var e=J>0&&setInterval((function(){Z(J-1)}),1e3);return function(){return clearInterval(e)}}),[J,q]),(0,s.useEffect)((function(){if((null===m||void 0===m?void 0:m.length)<=0)try{i.push("/")}catch(e){window.location.href="/"}}),[m]);var G=function(){var e="en"===U.get("lang")?"en":"ar_QA",a=(0,S.SR)(y);l.Z.post("".concat(e,"/checkout/verify/check-number-api"),{cell_no:a.nationalNumber,country_code:a.countryCallingCode}).then((function(n){!1===n.data?(O(!0),B(!0),Z(59),l.Z.post("".concat(e,"/checkout/verify/now"),{cell_no:a.nationalNumber,country_code:a.countryCallingCode}).then((function(e){0===e.data?O(!1):k(e.data)}))):t.isAuthenticated||l.Z.post("".concat(e,"/checkout/last-order"),{country_code:"+"+a.countryCallingCode,customer_phone:a.nationalNumber}).then((function(e){o(a,e.data.data)})).catch((function(){o(a)}))})).catch((function(e){return console.log(e)}))};return(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("div",{className:p.step_zero,children:[(0,n.jsx)("div",{className:p.step_zero_title,children:h("Please Choose a Checkout Method")}),(0,n.jsx)("div",{className:p.methods,children:(0,n.jsxs)("div",{className:"row",children:[(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:p.method_one,children:[(0,n.jsx)("h6",{children:h("REGISTERED USERS")}),E?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"spinner-border text-danger",role:"status"}),(0,n.jsx)("br",{}),(0,n.jsx)("strong",{children:h("Validating your login once again")})]}):(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),a({email:g,password:x})},children:[(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"email",children:h("Email address")}),(0,n.jsx)("input",{type:"email",className:"form-control",id:"email",name:"email",value:g,onChange:function(e){f(e.target.value)},placeholder:h("Enter email")}),(0,n.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:h("We'll never share your email with anyone else")})]}),(0,n.jsxs)("div",{className:"form-group",children:[(0,n.jsx)("label",{htmlFor:"exampleInputPassword1",children:h("Password")}),(0,n.jsx)("input",{type:"password",className:"form-control",id:"password",value:x,onChange:function(e){v(e.target.value)},placeholder:h("Password")})]}),(0,n.jsx)("div",{className:p.submit_wrapper,children:(0,n.jsx)("button",{type:"submit",className:p.login_submit,children:h("login")})})]})]})}),(0,n.jsx)("div",{className:"col-md-6",children:(0,n.jsxs)("div",{className:p.method_two,children:[(0,n.jsx)("h6",{children:h("GUEST CHECKOUT")}),(0,n.jsx)(S.ZP,{international:!0,defaultCountry:"QA",value:y,onChange:function(e){A(e)}}),(0,n.jsx)("div",{className:p.phone_submit_wrapper,children:(0,n.jsx)("button",{disabled:!y||!(0,S.yf)(y),type:"submit",className:p.phone_proceed,onClick:G,children:h("Proceed")})})]})})]})}),(0,n.jsxs)(K.Z,{show:M,size:"sm",centered:!0,ref:R,children:[(0,n.jsx)(K.Z.Header,{children:(0,n.jsx)("h6",{children:"Enter the OTP we sent to your given number"})}),(0,n.jsx)(K.Z.Body,{children:(0,n.jsx)(H.Z,{isInputNum:!0,value:P,onChange:function(e){I(e)},containerStyle:"otp",numInputs:4})}),(0,n.jsxs)(K.Z.Footer,{children:[(0,n.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:function(){return O(!1)},children:"Close"}),(0,n.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){var e="en"===U.get("lang")?"en":"ar_QA";if(M){var a=(0,S.SR)(y);l.Z.post("".concat(e,"/checkout/verify/final"),{cell_no:a.nationalNumber,country_code:"+"+a.countryCallingCode,otp:P,id:w}).then((function(e){"success"===e.data?(O(!1),o(a)):G()}))}},children:"Verify"}),(0,n.jsxs)("button",{type:"button",className:"btn btn-info",onClick:G,disabled:!(J<1),children:["Resend ",q&&J>1&&(0,n.jsxs)("span",{children:["(",J,")"]})]})]})]})]})})}))),J=t(12266),Z=t.n(J),G=t(77995);function W(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function V(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?W(Object(t),!0).forEach((function(a){(0,r.Z)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):W(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var Q=(0,d.$j)((function(e){return{cartItems:e.cart.cartItem,auth:e.auth}}),(function(e){return{emptyCart:function(){return(0,u.UY)(e)}}}))((function(e){var a=(0,m.useRouter)(),t=(0,s.useState)(localStorage.getItem("gift")?JSON.parse(localStorage.getItem("gift")):null),r=t[0],o=t[1],u=(0,s.useState)(),d=u[0],p=u[1],_=(0,s.useState)(0),g=_[0],f=_[1],j=(0,s.useState)(null),x=j[0],v=j[1],b=(0,s.useState)(10),y=b[0],A=b[1],N=(0,s.useState)(e.cartItems.reduce((function(e,a){return e+a.qnt*a.price.amount}),0)),w=N[0],S=N[1],k=(0,s.useState)(null),C=k[0],P=k[1],I=(0,s.useState)({customer_first_name:"",customer_email:"",billing_address_1:"",billing_state:"",billing_address_2:"",billing_city:"",billing_country:"QA",order_schedule:"morning",customer_phone:"",country_code:"",shipping_method:"flat_rate",shipping_cost:parseInt(y),payment_method:"cod",terms_and_conditions:"accepted",order_note:"",store_pickup:!1,coupon:localStorage.getItem("coupon")||"",coupon_id:"influencer"==localStorage.getItem("coupon_id")?100*localStorage.getItem("coupon").split("-")[1]:localStorage.getItem("coupon_id")||"",discount:localStorage.getItem("discount")||0,building:"",street:"",zone:""}),M=I[0],R=I[1],F=function(e){v(null),R(V(V({},M),e)),f(g+1)},E=function(){f(g-1)},D=function(a){if(/((\bINF)-(\d[0-9]*)-(\bBB$))/.test(a.toString()))e.auth.isAuthenticated&&"influencer"!=localStorage.getItem("coupon_id")&&(l.Z.defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("auth_token")||""),l.Z.post("en/auth/rewards/calculate",{subTotal:w,coupon:a}).then((function(t){var n=a.split("-")[1];R(V(V({},M),{},{coupon:a,coupon_id:100*n,discount:t.data.discount})),S(e.cartItems.reduce((function(e,a){return e+a.qnt*a.price.amount}),0)-t.data.discount),localStorage.setItem("discount",t.data.discount),localStorage.setItem("coupon",a)})).catch((function(e){})));else{var t=e.cartItems.map((function(e){return{product_id:e.product_id,price:e.price.amount,qty:e.qnt,option:e.option_main_id||null,option_child:e.option_id||null}})),n=e.auth.isAuthenticated?JSON.parse(e.auth.user).email:null;l.Z.post("en/checkout/coupon",{api:!0,cart:t,coupon:a,email:n}).then((function(t){R(V(V({},M),{},{coupon:a,coupon_id:t.data.coupon_id,discount:t.data.discount})),S(e.cartItems.reduce((function(e,a){return e+a.qnt*a.price.amount}),0)-t.data.discount),localStorage.setItem("coupon_id",t.data.coupon_id),localStorage.setItem("discount",t.data.discount),localStorage.setItem("coupon",a),v(t.data.msg)})).catch((function(e){v(e.response.data),localStorage.removeItem("coupon"),localStorage.removeItem("coupon_id"),localStorage.removeItem("discount"),R(V(V({},M),{},{coupon:"",coupon_id:"",discount:0}))}))}setTimeout(v(null),3e3)};return(0,s.useEffect)((function(){S(e.cartItems.reduce((function(e,a){return e+a.qnt*a.price.amount}),0)-M.discount),A("store_pickup"==d?0:"express"==d?20:w<100?10:0)}),[w,e.cartItems,M.discount]),(0,s.useEffect)((function(){var a=e.cartItems.map((function(e){return{product_id:e.product_id,price:e.price.amount,qty:e.qnt,option:e.option_main_id||null,option_child:e.option_id||null}}));if(localStorage.getItem("auth_token")){var t=localStorage.getItem("auth_token");l.Z.defaults.headers.common.Authorization="Bearer ".concat(t)}l.Z.post("en/cartdata/items",a).then((function(a){a.data.map((function(a){a||e.history.push("/bag")}))}))}),[e.cartItems]),(0,s.useState)((function(){p(localStorage.getItem("method")||"regular");var e=document.createElement("script");e.src="https://demo.myfatoorah.com/cardview/v1/session.js",e.async=!0,document.body.appendChild(e)}),[]),(0,s.useEffect)((function(){var e=localStorage.getItem("gift");if(e){var a=JSON.parse(e);w<a.cart_min&&(o(),localStorage.removeItem("gift"))}}),[w]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.default,{children:(0,n.jsx)("title",{children:"Checkout | Beautyboothqa "})}),(0,n.jsxs)("div",{className:Z().checkout_container,children:[0===g&&(0,n.jsx)(z,{numberHnadler:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;(M.coupon_id||M.coupon||M.discount)&&D(M.coupon),R(V(V({},M),{},a?{customer_email:a.customer_email,customer_first_name:a.customer_first_name,billing_address_1:a.billing_address_1,billing_address_2:a.billing_address_2,billing_city:a.billing_city,billing_state:a.billing_state,customer_phone:e.nationalNumber,country_code:"+"+e.countryCallingCode}:{customer_phone:e.nationalNumber,country_code:"+"+e.countryCallingCode})),f(g+1)},changeStep:F,stepZeroSubmit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=JSON.parse(window.localStorage.getItem("user"));(M.coupon_id||M.coupon||M.discount)&&D(M.coupon);var t=window.localStorage.getItem("auth_token")&&!a.isCustomer?"noemail@beautybooth.com":a.email,n=window.localStorage.getItem("auth_token")&&!a.isCustomer?"":a.first_name;if(e&&window.localStorage.getItem("auth_token")&&a.isCustomer){var r={customer_email:a.email,customer_first_name:e.customer_first_name,billing_address_1:e.billing_address_1,billing_address_2:e.billing_address_2,billing_city:e.billing_city,billing_state:e.billing_state,customer_phone:e.customer_phone,country_code:e.country_code};R(V(V({},M),r))}else R(V(V({},M),{},{customer_email:t,customer_first_name:n}));f(g+1)},styles:Z()}),1===g&&(0,n.jsx)(L,{changeStep:F,checkBoxHandler:function(){R(V(V({},M),{},{active:!M.active,building:"",street:"",zone:""}))},radioHandler:function(e){R(V(V({},M),{},{order_schedule:e}))},val:M,subTotal:w,shipping:y,storePicupHandler:function(){R(V(V({},M),{},{store_pickup:!M.store_pickup}))},testAreaHandler:function(e){R(V(V({},M),{},{order_note:e}))},styles:Z()}),2===g&&(0,n.jsx)(O,{prevStep:E,payment_method:M.payment_method,changeStep:F,deliviryHandler:function(e){R(V(V({},M),{},{payment_method:e}))},couponHandler:D,val:M,auth:e.auth,msg:x,styles:Z()}),3===g&&(0,n.jsx)(T,{prevStep:E,changeStep:F,orderSubmit:function(){var t=e.cartItems.map((function(e){return{product_id:e.product_id,price:e.price.amount,qty:e.qnt,bulk_id:e.bulk_id,option:e.option_main_id||null,option_child:e.option_id||null}})),n=[];if("store_pickup"==d){var s=M;s.shipping_method="local_pickup",s.shipping_cost=0,R(s)}if("express"==d){var i=M;i.shipping_method="express_delivery",i.shipping_cost=20,R(i)}if("regular"==d){var o=M;o.shipping_method=w>99?"free_shipping":"flat_rate",o.shipping_cost=y,R(o)}n.push(M),n.push(t),n.push({freeGift:r?r.id:null}),l.Z.post("en/checkout/final",n).then((function(a){if("success"==a.data.msg){P(a.data.order);var t=document.cookie.split(";").filter((function(e){return e.includes("_fbp=")})).map((function(e){return e.split("_fbp=")[1]})),n=document.cookie.split(";").filter((function(e){return e.includes("_fbc=")})).map((function(e){return e.split("_fbc=")[1]}));t=t.length&&t[0]||null,!(n=n.length&&n[0]||null)&&window.location.search.includes("fbclid=")&&(n="fb.1."+ +new Date+"."+window.location.search.split("fbclid=")[1]),c().post("/event/checkout-success",{em:M.customer_email,ph:M.customer_phone,product:e.cartItems.map((function(e){return{product_id:e.product_id,name:e.name,qty:e.qnt,price:e.price.amount}})),total:w,eventName:"Purchase",eventNameSource:"https://beautyboothqa.com/",order_id:a.data.order,fbp:t,fbc:n}),(0,G.FX)(e.cartItems),e.emptyCart(),""!=M.coupon_id&&M.coupon_id!==parseInt(M.coupon_id,10)&&"influencer"!=localStorage.getItem("coupon_id")&&(c().defaults.headers.common.Authorization="Bearer ".concat(localStorage.getItem("auth_token")||""),c().post("/api/coupon/mark_used",{id:M.coupon_id,email:M.customer_email})),localStorage.removeItem("coupon"),localStorage.removeItem("coupon_id"),localStorage.removeItem("discount"),localStorage.removeItem("gift"),localStorage.removeItem("method"),setTimeout((function(){window.location.href="/checkout/order-received/".concat(a.data.order)}),500)}})).catch((function(e){h.Am.error(e.response.data.message,{position:"bottom-right",autoClose:2e3,hideProgressBar:!0,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,onClose:function(){a.push("/bag")}})}))},data:M,shipping:y,lang:e.lang,giftProduct:r,styles:Z()}),4===g&&(0,n.jsx)(q,{order:C,styles:Z()}),(0,n.jsx)(h.Ix,{})]})]})}))},23591:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/checkout",function(){return t(2270)}])},12266:function(e){e.exports={checkout_container:"CheckoutPage_checkout_container__3iYn2",step_zero:"CheckoutPage_step_zero__2KC0G",step_zero_title:"CheckoutPage_step_zero_title__2wkny",method_one:"CheckoutPage_method_one__FnSJX",login_submit:"CheckoutPage_login_submit__ijmL1",method_two:"CheckoutPage_method_two__3x2aT",phone_submit_wrapper:"CheckoutPage_phone_submit_wrapper__3g6L3",submit_wrapper:"CheckoutPage_submit_wrapper__3LPBS",step_one:"CheckoutPage_step_one__2K17F",delivery_form:"CheckoutPage_delivery_form__Hbuot",checkbox_label:"CheckoutPage_checkbox_label__2a8da",form_title:"CheckoutPage_form_title__2G1b2",deleviry_schedule:"CheckoutPage_deleviry_schedule__2_EFP",form_group:"CheckoutPage_form_group__33prK",info_wrap:"CheckoutPage_info_wrap__3MOW9",info:"CheckoutPage_info__217DL",submit_container:"CheckoutPage_submit_container__3Xgso",proceed:"CheckoutPage_proceed__1Twow",cart_list:"CheckoutPage_cart_list__2cfRb",item_title:"CheckoutPage_item_title__2CmG5",cart_item:"CheckoutPage_cart_item__OE4Ur",details:"CheckoutPage_details__2_mUh",img_wrap:"CheckoutPage_img_wrap__2hWh_",detail:"CheckoutPage_detail__2iHby",name:"CheckoutPage_name__385d8",brand:"CheckoutPage_brand__10pue",status:"CheckoutPage_status__1JNzz",price_tag:"CheckoutPage_price_tag__3i_Q0",delete_btn:"CheckoutPage_delete_btn__D4waV",quantity:"CheckoutPage_quantity__1aczE",button_group:"CheckoutPage_button_group__1zse9",summery:"CheckoutPage_summery__1_rie",summery_item:"CheckoutPage_summery_item__3D8__",total:"CheckoutPage_total__1dP6m",store_pickup:"CheckoutPage_store_pickup__2KeCg","form-check":"CheckoutPage_form-check__2QvEg","form-check-input":"CheckoutPage_form-check-input__KaBok","form-check-label":"CheckoutPage_form-check-label__C4eC_",shop__address:"CheckoutPage_shop__address__253Zw",free:"CheckoutPage_free__2o0Df",step_two:"CheckoutPage_step_two__3qXNw",question:"CheckoutPage_question__IGVK1",payment_group:"CheckoutPage_payment_group__6yUos",wrap:"CheckoutPage_wrap__1nhfq",next_btn_wrap:"CheckoutPage_next_btn_wrap__2Mjii",step_three:"CheckoutPage_step_three__2Y5xz",invoice:"CheckoutPage_invoice__2sucZ",invoice_title:"CheckoutPage_invoice_title__1h1VF",customer_info:"CheckoutPage_customer_info__1IXUg",label:"CheckoutPage_label__3qV7t",table_footer:"CheckoutPage_table_footer__3R7mk",left:"CheckoutPage_left__3ZG4J",right:"CheckoutPage_right__2czDs",common:"CheckoutPage_common__Glh3G",place_order_container:"CheckoutPage_place_order_container__15E-3",step_four:"CheckoutPage_step_four__3AK93",circle:"CheckoutPage_circle__1Mcis",greet:"CheckoutPage_greet__16dW1",continue_container:"CheckoutPage_continue_container__1G52p","react-autowhatever-states":"CheckoutPage_react-autowhatever-states__2KJP6","react-autowhatever-city":"CheckoutPage_react-autowhatever-city__2Jos5","react-autosuggest__input":"CheckoutPage_react-autosuggest__input__lRt2B","react-autosuggest__suggestions-list":"CheckoutPage_react-autosuggest__suggestions-list__2KKi_",pregress_bar:"CheckoutPage_pregress_bar__1aj1G",active:"CheckoutPage_active__3Hgs1"}}},function(e){e.O(0,[1481,2474,9359,9663,1655,3966,9774,2888,179],(function(){return a=23591,e(e.s=a);var a}));var a=e.O();_N_E=a}]);